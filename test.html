<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/test.css"/>
    <link rel="icon" type="image/png" href="./img/favicon.png">
    <title>test</title>
    <style>
        body {margin: 0;}
        canvas {width: 100%; height: 100%;}
    </style>
</head>
<body>
    <header id="navigation">
        <!--hamburger button-->
        <nav class="navbar">
            <span class="open-slide">
                <button id="button" href="#" onclick="openSlideMenu()">&#9776;</button>
            </span>
        </nav>

        

        <!--pop-out side menu nav-->
        <div id="slide-menu" class="side-nav">
            <button href="#" class="btn-close" onclick="closeSlideMenu()">&#10005;</button>
            <a href="/">archive</a>
            <a href="about.html">about</a>
            <a href="contact.html">contact</a>
        </div>

        <script>
            function openSlideMenu() {
                document.getElementById('slide-menu').style.width = '250px';
                //document.getElementById('main').style.marginLeft = '250px';
                document.getElementById('button').style.visibility = 'hidden';
            }

            function closeSlideMenu() {
                document.getElementById('slide-menu').style.width = '0px';
                //document.getElementById('main').style.marginLeft = '0px';
                document.getElementById('button').style.visibility = 'visible';
            }

            window.onscroll = function() {myFunction()};
            var navbar = document.getElementById('navigation');
            var sticky = navbar.offsetTop;

            function myFunction() {
                if (window.pageYOffset >= sticky) {
                    navbar.classList.add('sticky')
                } else {
                    navbar.classList.remove('sticky');
                }
            }
        </script>
    </header>
    <main>
        
        <script src="./js/three/three.min.js"></script>
        <script src="./js/three/OrbitControls.js"></script>
        <script src="./js/three/GLTFLoader.js"></script>
        <script>
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(7,1,6);
            camera.lookAt(new THREE.Vector3(1,1,1));

            const renderer = new THREE.WebGLRenderer({
                alpha: true,
                antialias: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            window.addEventListener('resize', function() {
                const width = window.innerWidth;
                const height = window.innerHeight;
                renderer.setSize(width, height);
                camera.aspect = width/height;
                camera.updateProjectionMatrix();
            });

            const controls = new THREE.OrbitControls(camera, renderer.domElement)

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.1);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight.position.set(0, 1, 1);
            scene.add(directionalLight);

            const loader = new THREE.GLTFLoader();
            loader.load(
                
                './3D_models/metamorphosis_v3_txt.glb',

                function(gltf) {
                    model = gltf.scene
                    scene.add(model)
                }
            );

            const axesHelper = new THREE.AxesHelper( 5 );
            scene.add( axesHelper );
            
            //cube
            // const geometry = new THREE.BoxGeometry(1,1,1);
            // const material = new THREE.MeshPhongMaterial({
            //     color: 0xffffff,
            //     wireframe: false
            // });
            // const cube = new THREE.Mesh(geometry, material);
            // scene.add(cube);

            const update = function() {
                model.rotation.y += 0.01;
                // cube.rotation.x += 0.01;
                // cube.rotation.y += 0.005;
            };

            const render = function() {
                renderer.render(scene, camera);
            };

            const GameLoop = function() {
                requestAnimationFrame(GameLoop);
                update();
                render();
            };


            GameLoop();
        </script>

    </main>
    <footer>
        <div class="footer">
            <h3>&copy; <script>document.write(new Date().getFullYear())</script> Bryan Ridpath</h3>
        </div>
    </footer>
</body>
</html>